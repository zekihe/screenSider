<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>屏幕录制工具</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- 顶部标题栏 -->
        <header class="title-bar">
            <div class="title-bar-drag"></div>
            <div class="app-title">
                <i class="fas fa-video"></i>
                <span>屏幕录制工具</span>
            </div>
            <div class="window-controls">
                <button class="window-control minimize" id="minimize-btn">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="window-control maximize" id="maximize-btn">
                    <i class="fas fa-square"></i>
                </button>
                <button class="window-control close" id="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </header>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 左侧设置面板 -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3><i class="fas fa-sliders-h"></i> 录制设置</h3>
                    
                    <div class="form-group">
                        <label for="source-select">
                            <i class="fas fa-desktop"></i> 录制源
                        </label>
                        <select id="source-select" class="form-control">
                            <option value="">选择屏幕或窗口...</option>
                        </select>
                        <button id="refresh-sources" class="btn-secondary">
                            <i class="fas fa-sync-alt"></i> 刷新
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="region-select">
                            <i class="fas fa-crop"></i> 录制区域
                        </label>
                        <select id="region-select" class="form-control">
                            <option value="fullscreen">全屏</option>
                            <option value="window">当前窗口</option>
                            <option value="custom">自定义区域</option>
                        </select>
                    </div>
                    
                    <div id="custom-region-settings" class="hidden">
                        <div class="form-group">
                            <label>宽度: <span id="width-value">1920</span>px</label>
                            <input type="range" id="width-slider" min="640" max="3840" value="1920">
                        </div>
                        <div class="form-group">
                            <label>高度: <span id="height-value">1080</span>px</label>
                            <input type="range" id="height-slider" min="480" max="2160" value="1080">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="fps-select">
                            <i class="fas fa-tachometer-alt"></i> 帧率
                        </label>
                        <select id="fps-select" class="form-control">
                            <option value="15">15 FPS</option>
                            <option value="30" selected>30 FPS</option>
                            <option value="60">60 FPS</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="quality-select">
                            <i class="fas fa-chart-line"></i> 画质
                        </label>
                        <select id="quality-select" class="form-control">
                            <option value="low">低画质</option>
                            <option value="medium" selected>中等画质</option>
                            <option value="high">高画质</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="record-audio" checked>
                            <i class="fas fa-microphone"></i> 录制音频
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="camera-pip" checked>
                            <i class="fas fa-camera"></i> 摄像头画中画
                        </label>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3><i class="fas fa-key"></i> 快捷键</h3>
                    <div class="shortcut-item">
                        <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>5</kbd>
                        <span>开始/停止录制</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>C</kbd>
                        <span>显示/隐藏摄像头</span>
                    </div>
                </div>
            </aside>

            <!-- 右侧预览和控制区 -->
            <section class="content-area">
                <!-- 预览区域 -->
                <div class="preview-section">
                    <div class="preview-header">
                        <h3><i class="fas fa-eye"></i> 预览</h3>
                        <div class="preview-actions">
                            <button id="select-region-btn" class="btn-secondary">
                                <i class="fas fa-crop-alt"></i> 选择区域
                            </button>
                            <button id="clear-region-btn" class="btn-secondary">
                                <i class="fas fa-times"></i> 清除
                            </button>
                        </div>
                    </div>
                    
                    <div class="preview-container">
                        <div id="preview-area" class="preview-area">
                            <div class="preview-placeholder">
                                <i class="fas fa-desktop fa-4x"></i>
                                <p>选择录制源开始预览</p>
                            </div>
                            <!-- 摄像头画中画容器 -->
                            <div id="camera-pip-container" class="camera-pip-container hidden">
                                <div class="pip-header">
                                    <span>摄像头</span>
                                    <button id="close-camera-btn" class="pip-close-btn">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <video id="camera-preview" autoplay muted></video>
                                <div class="pip-resize-handle"></div>
                            </div>
                        </div>
                        
                        <div class="preview-info">
                            <div class="info-item">
                                <span class="info-label">分辨率:</span>
                                <span id="resolution-info">1920x1080</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">帧率:</span>
                                <span id="fps-info">30 FPS</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">状态:</span>
                                <span id="status-info" class="status-idle">就绪</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 控制区域 -->
                <div class="control-section">
                    <div class="control-buttons">
                        <button id="start-recording-btn" class="btn-primary btn-large">
                            <i class="fas fa-circle"></i> 开始录制
                        </button>
                        <button id="stop-recording-btn" class="btn-danger btn-large" disabled>
                            <i class="fas fa-stop"></i> 停止录制
                        </button>
                        <button id="pause-recording-btn" class="btn-secondary btn-large" disabled>
                            <i class="fas fa-pause"></i> 暂停
                        </button>
                    </div>
                    
                    <div class="recording-timer hidden" id="recording-timer">
                        <i class="fas fa-circle blinking-red"></i>
                        <span id="timer-display">00:00:00</span>
                        <span class="recording-label">录制中...</span>
                    </div>
                    
                    <div class="additional-controls">
                        <button id="open-file-btn" class="btn-secondary">
                            <i class="fas fa-folder-open"></i> 打开文件
                        </button>
                        <button id="settings-btn" class="btn-secondary">
                            <i class="fas fa-cog"></i> 设置
                        </button>
                        <button id="help-btn" class="btn-secondary">
                            <i class="fas fa-question-circle"></i> 帮助
                        </button>
                    </div>
                </div>

                <!-- 录制历史 -->
                <div class="history-section">
                    <h3><i class="fas fa-history"></i> 最近录制</h3>
                    <div id="recording-history" class="history-list">
                        <div class="history-empty">
                            <i class="fas fa-file-video fa-2x"></i>
                            <p>暂无录制历史</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部状态栏 -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="storage-status">
                    <i class="fas fa-hdd"></i> 存储空间: 充足
                </span>
                <span id="permission-status">
                    <i class="fas fa-shield-alt"></i> 权限: 检查中...
                </span>
            </div>
            <div class="status-right">
                <span id="version-info">版本: 1.0.0 原型</span>
            </div>
        </footer>
    </div>

    <!-- 摄像头权限提示 -->
    <div id="camera-permission-modal" class="modal hidden">
        <div class="modal-content">
            <h3><i class="fas fa-camera"></i> 需要摄像头权限</h3>
            <p>要使用摄像头画中画功能，请允许应用访问您的摄像头。</p>
            <div class="modal-buttons">
                <button id="grant-camera-permission" class="btn-primary">允许访问</button>
                <button id="skip-camera" class="btn-secondary">跳过</button>
            </div>
        </div>
    </div>

    <!-- 录制完成提示 -->
    <div id="recording-complete-modal" class="modal hidden">
        <div class="modal-content">
            <h3><i class="fas fa-check-circle success-icon"></i> 录制完成</h3>
            <p>文件已保存到: <span id="saved-path" class="file-path"></span></p>
            <div class="modal-buttons">
                <button id="open-folder-btn" class="btn-primary">
                    <i class="fas fa-folder-open"></i> 打开所在文件夹
                </button>
                <button id="close-modal-btn" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 加载脚本 -->
    <script src="renderer.js"></script>
</body>
</html>